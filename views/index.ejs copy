<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Members Dashboard</title>
</head>
<body>
  <h1>Welcome to the Members Dashboard</h1>

  <h2>Members:</h2>
  <form action="/update-attendance" method="POST">
    <ul>
      <% members.forEach(function(member) { %>
        <li>
          <strong><%= member.name %></strong>
          <label>Attendance:</label>
          <!-- Loop over the 8 events for attendance checkboxes -->
          <% for (let i = 0; i < 8; i++) { %>
            <label for="<%= member.name %>-event<%= i+1 %>">Event <%= i+1 %>:</label>
            <input type="checkbox" name="<%= member.name %>[]" value="true" <%= member.attendance[i] ? "checked" : "" %> />
          <% } %>
        </li>
      <% }) %>
    </ul>
    <input type="submit" value="Update Attendance">
  </form>

  <h2>Categories:</h2>
  <ul>
    <% Object.keys(categories).forEach(function(category) { %>
      <li>
        <strong><%= category %></strong>:
        <ul>
          <% categories[category].forEach(function(item) { %>
            <li>
              <%= item %>
              <form action="/assign-item" method="POST">
                <input type="hidden" name="category" value="<%= category %>">
                <input type="hidden" name="item" value="<%= item %>">
                <label for="member">Assign to member:</label>
                <select name="member">
                  <% members.forEach(function(member) { %>
                    <option value="<%= member.name %>"><%= member.name %></option>
                  <% }) %>
                </select>
                <input type="submit" value="Assign">
              </form>
              <form action="/unassign-item" method="POST">
                <input type="hidden" name="category" value="<%= category %>">
                <input type="hidden" name="item" value="<%= item %>">
                <input type="submit" value="Unassign">
              </form>
            </li>
          <% }) %>
        </ul>
      </li>
    <% }) %>
  </ul>

  <h2>Check Eligibility:</h2>
  <form action="/check-eligibility" method="POST">
    <label for="category">Category:</label>
    <select name="category">
      <% Object.keys(categories).forEach(function(category) { %>
        <option value="<%= category %>"><%= category %></option>
      <% }) %>
    </select>

    <label for="item">Item:</label>
    <input type="text" name="item">

    <input type="submit" value="Check Eligibility">
  </form>

</body>
</html>
